<ui:composition xmlns="http://www.w3.org/1999/xhtml"
  				xmlns:ui="http://java.sun.com/jsf/facelets"
			    xmlns:h="http://java.sun.com/jsf/html"
			    xmlns:f="http://java.sun.com/jsf/core"
			    xmlns:ice="http://www.icesoft.com/icefaces/component">
			    
	<ui:define name="booktable"/>
	<ui:param name="backingBean" value="#{bookServiceBackingBean}"/>
	
	<ice:form id="book_table">
		<ice:panelGroup styleClass="container margin_top50">
			<ice:panelGroup id="month_offset" styleClass="grid5 margin_auto">
				<ice:panelGroup id="offset_last" styleClass="grid1 float_left margin_top25">
					<ice:commandLink id="toLastMonth"
									 disabled="#{backingBean.monthOffset == 0? true:false}"
									 action="#{backingBean.switchViewToLastMonth}"
									 value="#{msgs.book_month_to_prev_month_txt}"/>
				</ice:panelGroup>
				<ice:panelGroup styleClass="grid1 text_center float_left">
					<span class="head_text">#{backingBean.currentMonth}</span>
					<span class="subtitle_size">#{msgs.book_month_text}</span>
				</ice:panelGroup>
				<ice:panelGroup id="offset_next" styleClass="grid1 float_left text_right margin_top25">
					<ice:commandLink id="toNextMonth" 
									 disabled="#{backingBean.monthOffset == 12? true:false}"
									 action="#{backingBean.switchViewToNextMonth}"
									 value="#{msgs.book_month_to_next_month_txt}"/>
				</ice:panelGroup>
			</ice:panelGroup>
			
			<table class="table table-bordered  table-hover">
				<tr>
					<ui:repeat var="htxt" value="#{backingBean.headerText}">
						<td class="light_greenbg2_force">
							<ice:outputText value="#{htxt}"/>
						</td>
					</ui:repeat>
				</tr>
				<ui:repeat varStatus="status" var="weekItem" value="#{backingBean.weekViewList}">
					<tr>
						<ui:repeat varStatus="innerstatus" var="dayItem" value="#{weekItem.dayOrderList}">
							<td class="#{(status.index == 0)?'':'border_top border_left'} 
							#{dayItem.loaded?(dayItem.fullLoaded?'light_greenbg white_text':
								'highlight_bgcolor white_text'):''}">
								<ice:commandLink>
									<ice:panelGroup>
										<ice:outputText escape="false" value="#{dayItem.displayText}"/>
									</ice:panelGroup>
								</ice:commandLink>
							</td>
						</ui:repeat>
					</tr>
				</ui:repeat>
			</table>
		</ice:panelGroup>
	</ice:form>
</ui:composition>