<ui:composition xmlns="http://www.w3.org/1999/xhtml"
  				xmlns:ui="http://java.sun.com/jsf/facelets"
			    xmlns:h="http://java.sun.com/jsf/html"
			    xmlns:f="http://java.sun.com/jsf/core"
			    xmlns:ice="http://www.icesoft.com/icefaces/component">
			    
	<ui:define name="booktable"/>
	<ui:param name="backingBean" value="#{bookServiceBackingBean}"/>
	
	<ice:form id="book_table">
		<ice:panelGroup styleClass="container margin_top50">
			<ice:panelGroup id="month_offset" styleClass="float_left">
				<ice:panelGroup id="offset_last">
					<ice:commandLink id="toLastMonth" 
									 disabled="#{backingBean.monthOffset == 0? true:false}"
									 action="#{backingBean.switchViewToLastMonth}"
									 value="#{msgs.book_month_to_prev_month_txt}"/>
				</ice:panelGroup>
				<ice:panelGroup>
					<h2>#{backingBean.currentMonth}#{msgs.book_month_text}</h2>
				</ice:panelGroup>
				<ice:panelGroup id="offset_next">
					<ice:commandLink id="toNextMonth" 
									 disabled="#{backingBean.monthOffset == 12? true:false}"
									 action="#{backingBean.switchViewToNextMonth}"
									 value="#{msgs.book_month_to_next_month_txt}"/>
				</ice:panelGroup>
			</ice:panelGroup>
			
			<table class="table table-bordered  table-hover">
				<tr>
					<ui:repeat var="htxt" value="#{backingBean.headerText}">
						<td class="light_greenbg2">
							<ice:outputText value="#{htxt}"/>
						</td>
					</ui:repeat>
				</tr>
				<ui:repeat varStatus="status" var="weekItem" value="#{backingBean.weekViewList}">
					<tr>
						<ui:repeat varStatus="innerstatus" var="dayItem" value="#{weekItem.dayOrderList}">
							<td class="#{(status.index == 0)?'':'border_top border_left'} 
							#{dayItem.loaded?'highlight_bgcolor white_text':''}">
								<ice:outputText value="#{dayItem.dateText}" />
							</td>
						</ui:repeat>
					</tr>
				</ui:repeat>
			</table>
		</ice:panelGroup>
	</ice:form>
</ui:composition>